/**
  ******************************************************************************
  * File Name          : STM32TouchController.cpp
  ******************************************************************************
  * This file is generated by TouchGFX Generator 4.18.1.
  ******************************************************************************
  * @attention
  *
  * Copyright (c) 2022 STMicroelectronics.
  * All rights reserved.
  *
  * This software is licensed under terms that can be found in the LICENSE file
  * in the root directory of this software component.
  * If no LICENSE file comes with this software, it is provided AS-IS.
  *
  ******************************************************************************
  */

/* USER CODE BEGIN STM32TouchController */

#include <STM32TouchController.hpp>
#include "ft5206.h"
void STM32TouchController::init()
{

	FT5206_Init();
}

bool STM32TouchController::sampleTouch(int32_t& x, int32_t& y)
{
	uint8_t buf[4];
	if(FT_INT == 0) //说明有手指按下。一直拉低
	{
		FT5206_RD_Reg(FT_REG_NUM_FINGER,buf,1);
		
		if(buf[0] & 0x0f)//说明真的有手指按下
		{
			FT5206_RD_Reg(FT_TP1_REG,buf,4);//读取第一点的坐标值
			y = ((uint16_t)(buf[0] & 0x0f) << 8) + buf[1];
			x = ((uint16_t)(buf[2] & 0x0f) << 8) + buf[3];
			return true;
			
		}
		
	}
		
    return false;
}

/* USER CODE END STM32TouchController */

/************************ (C) COPYRIGHT STMicroelectronics *****END OF FILE****/
